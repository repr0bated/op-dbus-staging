FROM python:3.9-slim

# OpenFlow Controller Container
# Runs Ryu-based privacy obfuscation controller

LABEL maintainer="Operation D-Bus"
LABEL description="Privacy Obfuscation OpenFlow Controller"

# Install dependencies
RUN apt-get update && apt-get install -y \
    gcc \
    python3-dev \
    libffi-dev \
    libssl-dev \
    && rm -rf /var/lib/apt/lists/*

# Install Ryu SDN framework
RUN pip install --no-cache-dir \
    ryu \
    eventlet \
    msgpack-python \
    netaddr

# Create app directory
WORKDIR /app

# Copy controller script
COPY scripts/privacy-obfuscation-controller.py /app/controller.py

# Expose OpenFlow port
EXPOSE 6653

# Run controller
CMD ["python3", "/app/controller.py"]
